<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.mn.dao.UserDao">
    <!-- 登录验证 -->
    <select id="login" parameterType="java.lang.String" resultType="org.mn.bean.User">
        SELECT * FROM user WHERE user_name=#{user_name} and user_passwd = #{user_passwd}
    </select>
    <!-- 权限获取 -->
    <select id="perCheck" parameterType="java.lang.String" resultType="org.mn.bean.Permissions">
        SELECT jsp_name, per_name FROM permissions 
		where per_id in(select per_id from role_per where role_id in(SELECT role_id FROM user_role where user_id = #{user_id}))
	</select>
	<!-- 查询所有用户信息 -->
    <select id="findAllUserInfo" resultType="org.mn.bean.User">
        select user_id, user_name, user_phone, user_sex from user    
	</select>
</mapper>